# 事件

## 事件三要素

事件源、事件、事件驱动程序.

> 事件源：事件来源，事件触发来源  
> 事件：触发的是什么时间、click、mouserover 等等  
> 事件驱动程序：触发该事件后需要 执行的操作，其实就是回调，稍微展开一丁点，如果监听了并触发是生成一个事件任务打包进事件队列。<a href="./eventloop" >事件循环</a>

## 事件流

事件发生过程，基于 w3c 标准，dom 结构下，产生一系列由根元素到目标元素再到根元素分别触发对应事件的过程，叫事件流。

### 根元素到目标元素

称为`事件捕获`，其中，不包括目标元素，

### 目标元素到根元素

称为`事件冒泡`。其中包含了目标元素

### addEventListener

```
element.addEventListener(event, function, useCapture)
```

event：事件名  
function： 事件驱动程序  
useCapture：是否在捕获阶段发生，默认为 false（即默认冒泡阶段）

### 事件代理

在需要对同个父元素下的子元素监听相同的事件并事件驱动程序也是相同时，我们可以利用事件流的特性，直接在监听父元素事件，利用冒泡机制。  
:::tip
监听特定元素，使用 on 方法监听，并在第二个参数里设定对应标签
:::

## 事件对象

Event 对象代表事件的状态，比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。

## preventDefault

event.preventDefault(),取消事件的默认行为，例如提交表单的 button 等等，事件驱动程序内部调用。

## stopPropagation

event.stopPropagation()，防止调用相同事件的传播，阻止冒泡和捕获。事件驱动程序内部调用。

## cancelBubble

如果事件对象的 cancelBubble 属性被设置为 true, 则会阻止事件继续向上冒泡（也可以阻止事件的捕获）。事件驱动程序内部设定，event.cancelBubble = true;

## 小结

事件分为三要素，其中存在事件捕获和冒泡， 默认是冒泡，因为捕获仍存在浏览器兼容性问题，事件代理原理就是事件冒泡，包含两个常用 api，取消默认行为及阻止事件传递。
